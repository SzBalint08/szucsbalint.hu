<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Közösségi Fal</title>
    <link rel="stylesheet" href="styles_default.css" />
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script defer src="script_fal.js"></script>
  </head>

  <body>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <div class="topnav" id="myTopnav">
      <a href="index.html">Kezdőlap</a>
      <a href="HU_blog.html">Blog</a>
      <a href="HU_contact.html">Kontakt</a>
      <a href="HU_games.html">Játékok</a>
      <a href="HU_majom.html">Patrik</a>
      <a href="#fal" class="active">Fal</a>
      <a class="flags" href="EN_fal.html"><img src="https://flagicons.lipis.dev/flags/4x3/gb.svg"></a>
      <a class="flags" href="DK_fal.html"><img src="https://flagicons.lipis.dev/flags/4x3/dk.svg"></a>
      <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
      </a>
    </div>

    <h1 class="title">Közösségi Fal</h1>

    <div id="falContainer">
      <!-- Bejelentkezés gomb -->
      <button id="toggleLoginBtn">Bejelentkezés</button>

      <!-- Bejelentkezési/regisztrációs panel -->
      <div id="authPanel" style="display:none;">
        <input id="email" type="email" placeholder="Email" />
        <input id="password" type="password" placeholder="Jelszó" />
        <input id="username" placeholder="Felhasználónév (regisztrációkor)" style="display:none;" />
        <button id="loginBtn">Bejelentkezés</button>
        <button id="registerToggleBtn">Regisztráció</button>
      </div>

      <!-- Kijelentkezés -->
      <button id="logoutBtn" style="display:none;">Kijelentkezés</button>

      <!-- Posztolás -->
      <div id="postPanel" style="display:none;">
        <textarea id="message" rows="4" placeholder="Írj egy bejegyzést..."></textarea>
        <button id="postBtn">Küldés</button>
      </div>

      <button id="translateBtn">Fordítás angolra</button>

<script>
// --- Bejegyzések DOM fordítása ---
const translateBtn = document.getElementById("translateBtn");
let translated = false;

translateBtn.onclick = async () => {
  const posts = document.querySelectorAll(".postContent");
  if (!translated) {
    for (const post of posts) {
      // Google Translate web oldalán keresztüli “hack”: gyors fetch a fordításhoz
      const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=hu&tl=en&dt=t&q=${encodeURIComponent(post.textContent)}`);
      const data = await res.json();
      post.dataset.original = post.textContent; // Eredeti szöveg mentése
      post.textContent = data[0].map(item => item[0]).join('');
    }
    translated = true;
    translateBtn.textContent = "Eredeti megjelenítése";
  } else {
    for (const post of posts) {
      post.textContent = post.dataset.original || post.textContent;
    }
    translated = false;
    translateBtn.textContent = "Fordítás angolra";
  }
};
</script>


      <!-- Bejegyzések -->
      <h2>Bejegyzések</h2>
      <div id="postsContainer"></div>
    </div>
  </body>
</html>
